var XR=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"globalscale",function(){return S}),n.d(e,"targetWidth",function(){return g}),n.d(e,"targetHeight",function(){return m}),n.d(e,"viewportWidth",function(){return O}),n.d(e,"viewportHeight",function(){return L}),n.d(e,"vrMouseUI",function(){return v}),n.d(e,"projectName",function(){return T}),n.d(e,"Init",function(){return w}),n.d(e,"DebugToHtml",function(){return C}),n.d(e,"SetBrowserMark",function(){return J}),n.d(e,"UseVRMouseUI",function(){return U}),n.d(e,"SetRunMode",function(){return X}),n.d(e,"SetOnUeMessageDelegate",function(){return E}),n.d(e,"SetOnRemoteButtonEventDelegate",function(){return R}),n.d(e,"SetProjectName",function(){return P}),n.d(e,"SetWebViewportSize",function(){return I}),n.d(e,"SetUEViewportSize",function(){return H}),n.d(e,"ExecuteUEConsoleCommand",function(){return x}),n.d(e,"SendMessageToUe",function(){return j}),n.d(e,"MessageFromUe",function(){return F}),n.d(e,"SendRemoteButtonEvent",function(){return k}),n.d(e,"TouchCtrl",function(){return B}),n.d(e,"SetViewInnerWindowSate",function(){return V}),n.d(e,"CallBack",function(){return z}),n.d(e,"WebReload",function(){return Z}),n.d(e,"OnWebUIStart",function(){return Q}),n.d(e,"SetWebVisibility",function(){return _}),n.d(e,"ChangeCamera",function(){return q}),n.d(e,"SetCameraPositionAndxyzCount",function(){return G}),n.d(e,"LookAtRedAxis",function(){return K}),n.d(e,"SetCameraHeightAndFieldOfView",function(){return $}),n.d(e,"SetCameraHorizontalOffset",function(){return tt}),n.d(e,"PlaySequenceAnimation",function(){return et}),n.d(e,"StopSequenceAnimation",function(){return nt}),n.d(e,"HasOpend",function(){return it}),n.d(e,"ReStart",function(){return ot}),n.d(e,"ResetScene",function(){return st}),n.d(e,"LoadSceneLoop",function(){return rt}),n.d(e,"UnLoadSceneLoop",function(){return ct}),n.d(e,"SetActiveSceneInstance",function(){return ut}),n.d(e,"SetLevelVisible",function(){return at}),n.d(e,"SetLevelVisibleGroup",function(){return dt}),n.d(e,"SetSceneActorState",function(){return ht}),n.d(e,"SetChooseHouseState",function(){return lt}),n.d(e,"InitSalesControl",function(){return ft}),n.d(e,"SelectMinBuildMaxFloor",function(){return St}),n.d(e,"SelectBuilding",function(){return gt}),n.d(e,"SelectUnit",function(){return mt}),n.d(e,"CloseAllBlock",function(){return Ot}),n.d(e,"SelectRoom",function(){return Lt}),n.d(e,"FliterSelect",function(){return Mt}),n.d(e,"EnterRoom",function(){return Nt}),n.d(e,"ExitRoom",function(){return yt}),n.d(e,"SendCtrlCmd",function(){return bt}),n.d(e,"DisplayFloor",function(){return pt}),n.d(e,"GetHuXingFloorMinimapInfo",function(){return vt}),n.d(e,"PlayHXAutoPlayCamera",function(){return Tt}),n.d(e,"SetDay24Time",function(){return wt}),n.d(e,"SetSeason",function(){return Ct}),n.d(e,"SetPost",function(){return Jt}),n.d(e,"UpdateHtmlFiles",function(){return Ut}),n.d(e,"Quit",function(){return Xt}),n.d(e,"UpDataRoomState",function(){return Et}),n.d(e,"SelectCtrlData",function(){return Rt}),n.d(e,"ClearH5DebugInfo",function(){return Yt}),n.d(e,"ConnectWebSocket",function(){return Pt}),n.d(e,"SetWSRemoteConnectedState",function(){return It}),n.d(e,"UseNullRender",function(){return Dt}),n.d(e,"SetOnThirdSendMessage",function(){return Ht}),n.d(e,"ThirdSendMessage",function(){return xt});let i,o,s,r,c,u,a,d,h,l,f,S=1,g=1920,m=1080,O=1,L=1,M=0,N="localMode",y=!1,b=window.ue,p="",v=!1,T="";function w(t=!1,e=!1,n=1920,l=1080,f){g=n,m=l,f&&((a=f).onTransmitMessage=(t,e)=>{switch(t){case"MessageFromUe":d&&d(e);break;case"SendMessageToUe":j(e.cmdName,e.argString,e.jsonData);break;case"RemoteButtonEvent":h&&h(e)}}),setInterval(()=>{M+=.1112},.1112),t&&((i=document.createElement("div")).className="debug",document.head.insertAdjacentElement("afterend",i),(o=document.createElement("div")).innerHTML="Use Debug Output!<br/>",i.insertAdjacentElement("afterbegin",o),(c=document.createElement("div")).innerHTML="touchEndDebug",i.insertAdjacentElement("afterbegin",c),(r=document.createElement("div")).innerHTML="touchMoveDebug",i.insertAdjacentElement("afterbegin",r),(s=document.createElement("div")).innerHTML="touchStartDebug",i.insertAdjacentElement("afterbegin",s),(u=document.createElement("div")).innerHTML="<button onclick='XR.Quit()'>Quit</button> <button onclick='XR.ClearH5DebugInfo()'>Clear</button> <button onclick='XR.SetWebVisibility()'>HiddenWebUI</button> <button onclick='XR.WebReload()'>WebReload</button> <button onclick='XR.ReStart()'>ReStart</button><a href=\"http://html5test.com\" draggable=\"false\">H5UI-20191029</a>",u.className="use-touch",i.insertAdjacentElement("afterbegin",u),console.log("Use Debug Output!")),b&&(console.log("Found window.ue"),C("Found window.ue")),window.innerWidth>0&&(O=window.innerWidth,L=window.innerHeight,D(O,L)),window.addEventListener("touchstart",function(t){if(s){s.innerHTML="All Touch Count:"+t.touches.length+"   ";for(let e=0;e<t.touches.length;e++)s.innerHTML+=Y("start",t.touches[e])}},!1),window.addEventListener("touchmove",function(t){if(r){r.innerHTML="All Touch Count:"+t.touches.length+"   ";for(let e=0;e<t.touches.length;e++)r.innerHTML+=Y("move",t.touches[e])}},{passive:!0}),window.addEventListener("touchend",function(t){if(c){c.innerHTML="All Touch Count:"+t.touches.length+"   ";for(let e=0;e<t.changedTouches.length;e++)c.innerHTML+=Y("end",t.changedTouches[e])}},!0),document.addEventListener("contextmenu",t=>t.preventDefault()),-1!=window.navigator.userAgent.indexOf("Mobile")?(-1!=window.navigator.userAgent.indexOf("QQBrowser")?J("Mobile_QQBrowser"):J("Mobile"),e&&U()):J("Desktop")}function C(t,e=!0){o&&(e?o.innerHTML+=t+"<br/>":o.innerHTML=t+"<br/>")}function J(t){C("BrowserMark: "+(p=t))}function U(){v=!0,C("UseVRMouseUI!")}function X(t){"localMode"!=t&&"remoteCtrlMode"!=t&&"webRTCMode"!=t||(N=t)}function E(t){d=t}function R(t){h=t}function Y(t,e){return"{type:"+t+",id:"+e.identifier+",sX:"+e.clientX+",sY:"+e.clientY+"}"}function P(t){T=t}function I(t,e){O=parseFloat(t),L=parseFloat(e),-1==window.navigator.userAgent.indexOf("Mobile")&&b&&(C("SetUe4WebBrowserViewportSize "+t+"*"+e),D(O,L))}function D(t,e){let n=document.getElementById("globalscalestyle");if(null==n)return;S=t/g;let i=".globalscale{";i+="width:"+Math.floor(t/S)+"px;",i+="height:"+Math.floor(e/S)+"px;",i+="zoom:"+S+";}",n.innerHTML=i}function H(t,e){x("r.SetRes "+t+"x"+e+"w")}function x(t){j("ExecuteUEConsoleCommand","",JSON.stringify({ueConsoleCommand:t}))}function A(t,e){let n=-1;for(let i=0;i<t.length;i++)t[i]==e&&(n=i);n>-1&&t.splice(n,1)}function W(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function j(t,e="",n="{}"){if(b||"WebReload"==t||"ReStart"==t||"HiddenWebUI"==t)return void(b&&b.sender.webtouemessage(t,e,n));switch("OnMouseHover"!=t&&"UpDataRoomState"!=t&&C("JsSend: "+t+"------"+e+"------"+n),N){case"localMode":b&&b.sender.webtouemessage(t,e,n);break;case"remoteCtrlMode":if(y)if(b)b.sender.webtouemessage(t,e,n);else if("OnUIMove"==t||"OnUIZoom"==t||"OnUIPan"==t||"OnOnePointDown"==t||"OnOnePointUp"==t){let i=JSON.stringify({cmdName:t,argString:e,jsonData:n});a.SendWSMessage("TransmitMessage","SendMessageToUe",i)}break;case"webRTCMode":if(y)if(b)b.sender.webtouemessage(t,e,n);else{let i=JSON.stringify({cmdName:t,argString:e,jsonData:n});a.SendWSMessage("TransmitMessage","SendMessageToUe",i)}}}function F(t,e,n){let i="ReceiveFromUE: "+t+"------"+e+"------"+n;if(console.log(i),"onCameraMiniMapPos"!=t&&C(i),"JsRun"!=t||"XR.WebReload()"!=e)switch(N){case"localMode":d({cmdName:t,argString:e,jsonData:n});break;case"remoteCtrlMode":if(y){if(b){let i=JSON.stringify({cmdName:t,argString:e,jsonData:n});a.SendWSMessage("TransmitMessage","MessageFromUe",i)}d({cmdName:t,argString:e,jsonData:n})}break;case"webRTCMode":if(y)if(b){let i=JSON.stringify({cmdName:t,argString:e,jsonData:n});a.SendWSMessage("TransmitMessage","MessageFromUe",i)}else d({cmdName:t,argString:e,jsonData:n})}else Z()}function k(t,e="",n="{}"){let i=JSON.stringify({cmdName:t,argString:e,jsonData:n});a.SendWSMessage("TransmitMessage","RemoteButtonEvent",i)}class B{constructor(t,e=!0,n=(()=>{}),i=(()=>{})){this.name=t.id,this.sendMessage=e,this.onUIMove=n,this.onUIZoom=i,this.touchList={},this.idList=new Array,-1!=window.navigator.userAgent.indexOf("Mobile")?(t.addEventListener("touchstart",t=>{this.OnTouchStart(t,this.name)},{passive:!1}),t.addEventListener("touchmove",t=>{this.OnTouchMove(t,this.name)},{passive:!1}),t.addEventListener("touchend",t=>{this.OnTouchEnd(t,this.name)},{passive:!1}),t.addEventListener("touchcancel",t=>{this.OnTouchCancel(t,this.name)},{passive:!1})):(t.addEventListener("mousedown",t=>{this.OnMouseDown(t,this.name)}),t.addEventListener("mousemove",t=>{this.OnMouseMove(t,this.name)}),t.addEventListener("mouseup",t=>{this.OnMouseUp(t,this.name)}),t.addEventListener("wheel",t=>{this.OnWheel(t,this.name)}),t.addEventListener("mousemove",t=>{this.OnMouseMove(t,this.name)}),t.addEventListener("mouseout",t=>{this.OnMouseUp(t,this.name)}))}OnMouseDown(t,e){if(0==t.button){this.touchList[0]={sX:t.clientX,sY:t.clientY,cX:t.clientX,cY:t.clientY,lX:t.clientX,lY:t.clientY},C("OnMouseDown X:"+this.touchList[0].sX+" Y:"+this.touchList[0].sY);let n=t.clientX/O,i=t.clientY/L;this.sendMessage&&j("OnOnePointDown","",JSON.stringify({touchName:e,xPosPercent:n,yPosPercent:i}))}}OnMouseHover(t,e){}OnMouseMove(t,e){if(this.touchList[0]){this.touchList[0].cX=t.clientX,this.touchList[0].cY=t.clientY;let n=this.touchList[0].cX-this.touchList[0].lX,i=this.touchList[0].cY-this.touchList[0].lY;M>1&&(M=0,C(this.name+"   xOffset:"+n+"    yOffset:"+i,!1),this.OnUIMove(n,i),this.sendMessage&&j("OnUIMove","",JSON.stringify({touchName:e,xOffset:n,yOffset:i})),this.touchList[0].lX=this.touchList[0].cX,this.touchList[0].lY=this.touchList[0].cY)}else if(M>1){M=0;let n=t.clientX,i=t.clientY;this.sendMessage&&j("OnMouseHover","",JSON.stringify({touchName:e,xPos:n,yPos:i}))}}OnMouseUp(t,e){this.touchList[0]&&delete this.touchList[0],this.sendMessage&&j("OnOnePointUp","",JSON.stringify({touchName:e}))}OnWheel(t,e){C("OnWheel Y:"+t.deltaY,!1);let n=.01*t.deltaY;this.OnUIZoom(n),this.sendMessage&&j("OnUIZoom","",JSON.stringify({touchName:e,zoomOffset:n}))}OnTouchStart(t,e){for(let e=0;e<t.changedTouches.length;e++)t.currentTarget.id===this.name&&(this.touchList[t.changedTouches[e].identifier]={sX:t.changedTouches[e].clientX,sY:t.changedTouches[e].clientY,cX:t.changedTouches[e].clientX,cY:t.changedTouches[e].clientY,lX:t.changedTouches[e].clientX,lY:t.changedTouches[e].clientY},this.idList.push(t.changedTouches[e].identifier));if(1==t.touches.length){let n=t.touches[0].clientX/O,i=t.touches[0].clientY/L;this.sendMessage&&j("OnOnePointDown","",JSON.stringify({touchName:e,xPosPercent:n,yPosPercent:i}))}}OnTouchMove(t,e){for(let e=0;e<t.touches.length;e++)t.currentTarget.id===this.name&&this.touchList[t.touches[e].identifier]&&(this.touchList[t.touches[e].identifier].cX=t.touches[e].clientX,this.touchList[t.touches[e].identifier].cY=t.touches[e].clientY);if(1==this.idList.length){let t=this.touchList[this.idList[0]].cX-this.touchList[this.idList[0]].lX,n=this.touchList[this.idList[0]].cY-this.touchList[this.idList[0]].lY;M>1&&(M=0,C(this.name+"  "+this.idList.length+"   xOffset:"+t+"    yOffset:"+n,!1),this.OnUIMove(t,n),this.sendMessage&&j("OnUIMove","",JSON.stringify({touchName:e,xOffset:t,yOffset:n})),this.touchList[this.idList[0]].lX=this.touchList[this.idList[0]].cX,this.touchList[this.idList[0]].lY=this.touchList[this.idList[0]].cY)}else if(2==this.idList.length){let t=.1*(W(this.touchList[this.idList[1]].lX,this.touchList[this.idList[1]].lY,this.touchList[this.idList[0]].lX,this.touchList[this.idList[0]].lY)-W(this.touchList[this.idList[1]].cX,this.touchList[this.idList[1]].cY,this.touchList[this.idList[0]].cX,this.touchList[this.idList[0]].cY));M>1&&(M=0,C(this.name+" zoomOffset:"+t,!1),this.OnUIZoom(t),this.sendMessage&&j("OnUIZoom","",JSON.stringify({touchName:e,zoomOffset:t})),this.touchList[this.idList[0]].lX=this.touchList[this.idList[0]].cX,this.touchList[this.idList[0]].lY=this.touchList[this.idList[0]].cY,this.touchList[this.idList[1]].lX=this.touchList[this.idList[1]].cX,this.touchList[this.idList[1]].lY=this.touchList[this.idList[1]].cY)}else if(3==this.idList.length){let t=this.touchList[this.idList[0]].cX-this.touchList[this.idList[0]].lX,n=this.touchList[this.idList[0]].cY-this.touchList[this.idList[0]].lY;M>1&&(M=0,C(this.name+" panX:"+t+";panY:"+n,!1),this.sendMessage&&j("OnUIPan","",JSON.stringify({touchName:e,xOffset:t,yOffset:n})),this.touchList[this.idList[0]].lX=this.touchList[this.idList[0]].cX,this.touchList[this.idList[0]].lY=this.touchList[this.idList[0]].cY)}}OnTouchEnd(t,e){for(let e=0;e<t.changedTouches.length;e++)t.currentTarget.id===this.name&&(delete this.touchList[t.changedTouches[e].identifier],A(this.idList,t.changedTouches[e].identifier));if(C(this.name+"  "+this.idList.length+JSON.stringify(this.touchList)),1==t.touches.length){let n=t.touches[0].clientX/O,i=t.touches[0].clientY/L;this.sendMessage&&j("OnOnePointDown","",JSON.stringify({touchName:e,xPosPercent:n,yPosPercent:i}))}else this.sendMessage&&j("OnOnePointUp","",JSON.stringify({touchName:e}))}OnTouchCancel(t,e){delete this.touchList,this.touchList={},this.idList=new Array,console.log("TouchCancel"),C("TouchCancel")}OnUIMove(t,e){this.onUIMove(t,e)}OnUIZoom(t){this.onUIZoom(t)}OnUIPan(t,e){}}function V(t,e,n,i,o,s){j("SetViewInnerWindowSate","",JSON.stringify({state:t,sceneInstanceName:e,xPos:n,yPos:i,xSize:o,ySize:s}))}function z(t="",e="",n){let i;return i=n?JSON.stringify(n):"",JSON.stringify({cmdName:t,argString:e,jsonData:i})}function Z(){j("WebReload")}function Q(){j("OnWebUIStart")}function _(){j("SetWebVisibility",l?"true":"false","{}"),l=!l}function q(t,e="",n=2,i=!0){""!=e&&JSON.parse(e),j("ChangeCamera","",JSON.stringify({cameraName:t,onChangeCameraEnd:e,useTime:n,endEnableCtrl:i}))}function G(t,e="",n=1,i=!0){""!=e&&JSON.parse(e),j("SetCameraPositionAndxyzCount","",JSON.stringify({posAndxyzCount:t,onCameraMoveEnd:e,useTime:n,endEnableCtrl:i}))}function K(t,e,n,i,o,s,r,c,u,a="",d="",h="",l=1,f=!0){""!=h&&JSON.parse(h),j("LookAtRedAxis","",JSON.stringify({posX:t,posY:e,posZ:n,forwardX:i,forwardY:o,forwardZ:s,mirrorX:r,mirrorY:c,mirrorZ:u,inYCount:a,inZCount:d,onCameraMoveEnd:h,useTime:l,endEnableCtrl:f}))}function $(t=-1,e=-1){j("SetCameraHeightAndFieldOfView","",JSON.stringify({height:t,view:e}))}function tt(t){j("SetCameraHorizontalOffset","",JSON.stringify({offset:t}))}function et(t,e=-1){j("PlaySequenceAnimation","",JSON.stringify({animationID:t,loopTime:e}))}function nt(){j("StopSequenceAnimation","","{}")}function it(){j("HasOpend","","{}")}function ot(t=""){""!=t?JSON.parse(t):t=z("JsRun","XR.WebReload()",{}),j("ReStart","",JSON.stringify({onEndReStart:t}))}function st(t,e="",n){""!=e&&JSON.parse(e),j("ResetScene","",JSON.stringify({sceneName:t,onEndResetScene:e,visibleOnEnd:n}))}function rt(t,e="",n="",i="",o=!0){""!=e&&JSON.parse(e),""!=n&&JSON.parse(n),""!=i&&JSON.parse(i),j("LoadSceneLoop","",JSON.stringify({sceneNames:t,onStartLoad:e,onLoading:n,onEndLoad:i,visibleDefault:o}))}function ct(t,e="",n="",i=""){""!=e&&JSON.parse(e),""!=n&&JSON.parse(n),""!=i&&JSON.parse(i),j("UnLoadSceneLoop","",JSON.stringify({sceneNames:t,onStartUnLoad:e,onUnLoading:n,onEndUnLoad:i}))}function ut(t,e="",n=""){j("SetActiveSceneInstance","",JSON.stringify({sceneName:t,defaultCameraName:e,onEnd:n}))}function at(t,e,n=""){""!=n&&JSON.parse(n),j("SetLevelVisible","",JSON.stringify({sceneName:t,visible:e,onLevelVisible:n}))}function dt(t,e){j("SetLevelVisibleGroup","",JSON.stringify({sceneNames:t,visibles:e}))}function ht(t,e,n=!1){j("SetSceneActorState","",JSON.stringify({actorName:t,state:e,ignoreCurrentState:n}))}function lt(t,e=0,n=!1){j("SetChooseHouseState","",JSON.stringify({active:t,entranceType:e,isSalasState:n}))}function ft(t){j("InitSalesControl","",JSON.stringify({active:t}))}function St(t){j("SelectMinBuildMaxFloor","",JSON.stringify({hxName:t}))}function gt(t){j("SelectBuilding","",JSON.stringify({inSelect:t}))}function mt(t){j("SelectUnit","",JSON.stringify({inSelect:t}))}function Ot(){j("CloseAllBlock","")}function Lt(t="",e){j("SelectRoom","",JSON.stringify({roomNumber:t,isEnterroomState:e}))}function Mt(t="",e,n){j("FliterSelect","",JSON.stringify({filterStr:t,startFloor:e,endFloor:n}))}function Nt(t){j("EnterRoom","",JSON.stringify({isEnterroomState:t}))}function yt(t){j("ExitRoom","",JSON.stringify({isEnterroomState:t}))}function bt(t,e="",n="{}"){j("SendCtrlCmd","",JSON.stringify({cmdName:t,argString:e,jsonData:n}))}function pt(t,e=!1){j("DisplayFloor","",JSON.stringify({floorid:t,hiddenTopFloorMesh:e}))}function vt(t){j("GetHuXingFloorMinimapInfo","",JSON.stringify({floorid:t}))}function Tt(t){j("PlayHXAutoPlayCamera","",JSON.stringify({state:t}))}function wt(t){j("SetDay24Time","",JSON.stringify({id:t}))}function Ct(t){j("SetSeason","",JSON.stringify({id:t}))}function Jt(t){j("SetPost","",JSON.stringify({postType:t}))}function Ut(){j("UpdateHtmlFiles")}function Xt(){j("Quit")}function Et(t,e="",n="",i="",o="",s=""){j("UpDataRoomState","",JSON.stringify({cmdName:t,roomIdString:e,saleStatuString:n,ConsPrice:i,CustomName:o,CustomPhone:s}))}function Rt(t,e=""){j("SelectCtrlData","",JSON.stringify({cmdName:t,selectDataString:e}))}function Yt(){o.innerHTML=""}function Pt(t){a&&a.ConnectWebSocket(t)}function It(t){y=t}function Dt(t){j("UseNullRender","",JSON.stringify({state:t}))}function Ht(t){f=t}function xt(t,e="",n="{}"){f&&f(t,e,n)}}]);